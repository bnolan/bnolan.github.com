<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Ben Nolan - Home</title>
    <link rel="stylesheet" href="/stylesheets/reset.css" />
    <link rel="stylesheet" href="/stylesheets/text.css" />
    <link rel="stylesheet" href="/stylesheets/960.css" />
    <link rel="stylesheet" href="/stylesheets/ben.css" />
  </head>
  <body>
    <div class="container_12">
      <div id="header" class="basic">

        <div class="heading">
          <h1>
            <a href="/">Ben Nolan</a>
          </h1>
        </div>
      </div>
      
      <div class="clear"></div>

      <h2 class="subtitle">
        <span>I like to make software that is <em>fun</em> and <em>good looking</em>.</span>
      </h2>
      
      <div class="grid_8" style="padding-left: 10px">
        
        
          <div class="grid_2">
            <div class="metadate">
              Thu
              July 29
              </div>
          </div>
          
          <div class="grid_5 post">
            <h3 class="title"><a href="/2010/07/29/number-of-cities-in-the-world.html">Number Of Cities In The World</a></<h1 id=""></h1>
              <div class="postcontent">
                <p>When you&#8217;re building an application for travellers, you come up against the problem of how do you get enough data in the system so that it&#8217;s useful for 455 cities with a population of more than one million people, 1054 with more than 500,000 and 2851 with more than 150,000 people.</p>

<p>Or to look at the problem a different way - the most visited cities in the world&#8230;</p>

<h1 id='most_visited_cities'>Most visited cities</h1>

<p>This <a href='http://en.wikipedia.org/wiki/Tourism#Most_visited_cities'>table</a> at Wikipedia shows the top <b>10 most visited</b> cities to be <i>Paris, London, Bangkok, Singapore, Kuala Lumpur, New York City, Dubai, Istanbul, Hong Kong, Shanghai</i>. If KL, Dubai and HK seem a surprising inclusion - I guess it&#8217;s because your an anglophile like me, and forget that people from Asia and the Middle East use jumbo jets too.</p>
              </div>
          </div>
          
          <!--div class="comment-link"><a href="/2010/07/29/number-of-cities-in-the-world.html#disqus_thread">Number Of Cities In The World</a></div-->
          
          <div class="clear"></div>
        
          <div class="grid_2">
            <div class="metadate">
              Wed
              July 28
              </div>
          </div>
          
          <div class="grid_5 post">
            <h3 class="title"><a href="/2010/07/28/haversine-in-coffeescript.html">Haversine In Coffeescript</a></<h1 id=""></h1>
              <div class="postcontent">
                <p>The <a href='http://en.wikipedia.org/wiki/Haversine_formula'>Haversine formula</a> is a equation that can be used to calculate the straight line distance between two coordinates on a sphere. It is commonly used by geohackers to work out how far in <em>kilometres</em> it is between two latitude/latitude coordinates.</p>

<p>Remember that lat/longs are actually spherical coordinates expressed in degrees.</p>

<p>This <a href='http://kapelica.hr/kw/latlong.html'>page</a> at kapelica.hr contained a great implementation of the haversine formula in javascript, I tidied it up and ported it to coffeescript to measure distances to the nearest places in my iphone app.</p>

<pre><code>Radians: (degrees) -&gt;
  degrees /  57.2957795

Haversine: (lat1, lon1, lat2, lon2) -&gt;
  R = 6371 # km
  dLat: Radians(lat2-lat1)
  dLon: Radians(lon2-lon1)
  a: Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(Radians(lat1)) * Math.cos(Radians(lat2)) * Math.sin(dLon/2) * Math.sin(dLon/2)
  c: 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))
  R * c</code></pre>

<p>Note that the degrees-&gt;radians conversion isn&#8217;t exact, but the results should be within the margin of error for most GPS positioning systems.</p>
              </div>
          </div>
          
          <!--div class="comment-link"><a href="/2010/07/28/haversine-in-coffeescript.html#disqus_thread">Haversine In Coffeescript</a></div-->
          
          <div class="clear"></div>
        
          <div class="grid_2">
            <div class="metadate">
              Wed
              July 28
              </div>
          </div>
          
          <div class="grid_5 post">
            <h3 class="title"><a href="/2010/07/28/display-only-the-first-paragraph.html">Display Only The First Paragraph</a></<h1 id=""></h1>
              <div class="postcontent">
                <p>In redesigning my blog and publishing it on github pages, I wanted a simple way to show only the first paragraph of each post on the front page. The way I did it isn&#8217;t something I&#8217;m proud of - but it does show the power of css.</p>

<p>The following rule hides everything apart from the first immediate child of a div.</p>

<pre><code>div &gt; * + *{
  display: none;
}</code></pre>

<p>It works on safari, firefox and will work on ie9.</p>
              </div>
          </div>
          
          <!--div class="comment-link"><a href="/2010/07/28/display-only-the-first-paragraph.html#disqus_thread">Display Only The First Paragraph</a></div-->
          
          <div class="clear"></div>
        
          <div class="grid_2">
            <div class="metadate">
              Fri
              July 23
              </div>
          </div>
          
          <div class="grid_5 post">
            <h3 class="title"><a href="/2010/07/23/offline-manifests.html">Offline Manifests</a></<h1 id=""></h1>
              <div class="postcontent">
                <p>I&#8217;ve been working on an html5 app for Lonely Planet, and part of the task is to make the app work offline on the iPhone. Getting it to work isn&#8217;t too hard - you need to create a <a href='http://diveintohtml5.org/offline.html'>cache.manifest</a> file and make sure it is served with the correct mime type.</p>

<h2 id='the_problem_is_online'>The problem is online</h2>

<p>When you have the phone offline and load the app, it loads in 2 seconds. When you turn the phone online again, it takes about 30 seconds to load all the javascript and so on.</p>

<h2 id='its_the_caching_rules'>It&#8217;s the caching rules</h2>

<p>We have been deploying to google app engine, and by default - app engine sets all files to expire after 10 minutes. So even though the iphone has a local copy of the files, every 10 minutes, it&#8217;ll expire the local cache and redownload everything that the manifest refers too.</p>

<h2 id='a_checklist_for_fast_online_iphone_apps'>A checklist for fast online iphone apps</h2>

<ol>
<li>Use a manifest</li>

<li>Ensure the manifest is served with the mimetype text/cache-manifest</li>

<li>Ensure the manifest has no 404 errors in it</li>

<li>Ensure the manifest and all the content in it has an expiry date in the distant future</li>

<li>White-list your network resources explicitly in the manifest</li>

<li>Use jqt.offline.js to help debug the browser behaviour</li>

<li>Tail your webserver logs and keep an eagle eye for unnecessary requests</li>
</ol>

<p>All going well, your html5 app will load instantly, and still be able to access network resources.</p>
              </div>
          </div>
          
          <!--div class="comment-link"><a href="/2010/07/23/offline-manifests.html#disqus_thread">Offline Manifests</a></div-->
          
          <div class="clear"></div>
        
          <div class="grid_2">
            <div class="metadate">
              Mon
              July 05
              </div>
          </div>
          
          <div class="grid_5 post">
            <h3 class="title"><a href="/2010/07/05/coffeescript.html">Coffeescript</a></<h1 id=""></h1>
              <div class="postcontent">
                <p>I&#8217;ve been doing a lot of coffeescript lately and can recommend it wholeheartedly.</p>
              </div>
          </div>
          
          <!--div class="comment-link"><a href="/2010/07/05/coffeescript.html#disqus_thread">Coffeescript</a></div-->
          
          <div class="clear"></div>
        

      </div>

      <div class="grid_3 sidebar">
        
        <h2>
          Work with me
        </h2>
        
        <p>
          <img src="/images/37-suitcase.png" width="20" style="float: left; padding: 0 10px 40px 0"/> I am available for hire,
          <a href="mailto:bnolan@gmail.com">email</a> or <a href="callto:bennolan">call me</a>.
        </p>

        <h2>
          Tools
        </h2>
        
        <ul>
          <li><a href="http://jquery.com/">jQuery</a>, <a href="http://www.w3.org/TR/html5/">HTML5</a> and <a href="http://www.w3.org/Style/CSS/current-work">CSS3</a></li>
          <li><a href="http://nodejs.org/">node.js</a> and <a href="http://rubyonrails.org/">Ruby on Rails</a></li>
          <li><a href="http://www.mongodb.org/">MongoDB</a> or <a href="http://www.postgresql.org/">PostgreSQL</a></li>
        </ul>

        <h2>
          Clients
        </h2>
        
        <ul>
          <li><a href="http://www.lonelyplanet.com/">Lonely Planet</a></li>
          <li><a href="http://www.copenhagen.dk/dk/">Copenhagen Museum</a></li>
          <li><a href="http://www.sony.net/Fun/design/profile/globallocations/losangeles.html">Sony Los Angeles</a></li>
          <li><a href="http://www.autoscout24.de/">Autoscout 24 Munich</a></li>
        </ul>

        <h2>
          Find me online
        </h2>
        
        <ul class="findmeonline">
          <li><a href="http://github.com/bnolan/"><img src="/images/github.png" /> github</a></li>
          <li><a href="http://flickr.com/photos/benn"><img src="/images/flickr.png" /> flickr</a></li>
          <li><a href="http://twitter.com/bnolan"><img src="/images/twitter.png" /> twitter</a></li>
          <li><a href="http://www.facebook.com/bennolan"><img src="/images/facebook.png" /> facebook</a></li>
        </ul>
        
      </div>

      <div class="push"></div>
    </div>

  </body>
</html>
